<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<modify version="11.0.1_9ac66cf38631f8473e37c39091c4b798f01bbf41">
    <add>
        <annotations>
            <annotation name="hygienic"/>
        </annotations>
        <type-metadata>
            <param name="type" value="module"/>
            <param name="fully-qualified-name" value="com.autoever.poc.test.TestRawParser"/>
        </type-metadata>
        <memory-model-settings/>
        <import alias="MainOutputSchema" from="com.autoever.poc.maineventflow.AutoVDMSFlow_v2" item="MainOutputSchema"/>
        <dynamic-variables/>
        <stream name="InputStream" schema="MainOutputSchema"/>
        <box name="GetRaw" type="map">
            <input port="1" stream="InputStream"/>
            <output port="1" stream="out:GetRaw_1"/>
            <target-list>
                <item name="input" selection="all"/>
                <expressions>
                    <replace field="perfData.t2_time">to_milliseconds(now())</replace>
                    <include field="parsed">GetRaws(binaryData, string(null))</include>
                </expressions>
            </target-list>
        </box>
        <box name="Split" type="split">
            <input port="1" stream="out:GetRaw_1"/>
            <output port="1" stream="out:Split_1"/>
            <output port="2" stream="out:Split_2"/>
            <param name="output-count" value="2"/>
        </box>
        <box name="Map2" type="map">
            <input port="1" stream="out:Split_2"/>
            <output port="1" stream="out:Map2_1"/>
            <target-list>
                <item name="input" selection="all"/>
                <expressions>
                    <replace field="perfData.t3_time">to_milliseconds(now())</replace>
                    <include field="raw_count">length(parsed)</include>
                </expressions>
            </target-list>
        </box>
        <box name="Map4" type="map">
            <input port="1" stream="out:Split_1"/>
            <output port="1" stream="OutputStream2"/>
            <target-list>
                <item name="input" selection="all">
                    <remove field="parsed"/>
                    <remove field="binaryData"/>
                </item>
                <expressions>
                    <include field="data_count">length(parsed)</include>
                    <replace field="perfData.t3_time">to_milliseconds(now())</replace>
                </expressions>
            </target-list>
        </box>
        <output-stream name="OutputStream2"/>
        <box name="Iterate" type="iterate">
            <input port="1" stream="out:Map2_1"/>
            <output port="1" stream="out:Iterate_1"/>
            <param name="iterate-expr" value="parsed"/>
            <target-list>
                <item name="input" selection="all"/>
                <expressions>
                    <include field="element">each.element</include>
                </expressions>
            </target-list>
        </box>
        <box name="Sequence" type="seqnum">
            <input port="1" stream="out:Iterate_1"/>
            <output port="1" stream="out:Sequence_1"/>
            <param name="output-field" value="sequence_id"/>
            <param name="sequence-id" value="sequenceid"/>
            <param name="update-expression" value="sequenceid + 1"/>
        </box>
        <box name="Map3" type="map">
            <input port="1" stream="out:Sequence_1"/>
            <output port="1" stream="OutputStream"/>
            <target-list>
                <item name="input" selection="all">
                    <remove field="binaryData"/>
                    <remove field="parsed"/>
                </item>
                <expressions>
                    <replace field="perfData.t4_time">to_milliseconds(now())</replace>
                </expressions>
            </target-list>
        </box>
        <output-stream name="OutputStream"/>
    </add>
</modify>
